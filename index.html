<html>
  <head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>

    <div id="display"></div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tipsy/1.0.2/jquery.tipsy.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
    <script src = "table.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script>
      $.ajax({
        url:"https://www.kimonolabs.com/api/553hlgto?apikey=fR6lhnsHZjqjFQe7jbdot8lrFEw72evx&kimbywithurl",
        crossDomain: true,
        dataType: "jsonp",
      })
      .done(function(response) {
        console.log("success");
        myReturnData(response);
      })
      .fail(function() {
        console.log("error");
      })
      .always(function() {
        console.log("complete");
      });

      var myReturnData = function(data){

        myData = data.results.details

        var display = d3.select("#display")
        var table = display.append("table")
        // table.append("td")
        // .text("hi")
        var rows = table.selectAll("tr.row")
        .data(myData)

        var rowsEnter = rows.enter()
        .append("tr").classed("row", true)
        rowsEnter.append("td")
        .text(function(d) {return d.company})
        rowsEnter.append("td")
        .append('img')
        .attr({
          src: function(d) {return d.image.src}
        })
        rowsEnter.append("td")
        .append("a")
        .attr({
          href: function(d) {return d.url}
        }).text(function(d) {return d.name})



      }

    </script>
  </body>
</html>




